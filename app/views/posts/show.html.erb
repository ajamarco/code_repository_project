<%= render 'error'%>
<% if flash[:notice] %>
    <h1><div class="notice"><%= flash[:notice] %></div></h1>
<% end %>

        <hr>

        <!-- Preview Image -->
        <img class="img-fluid rounded" src="https://media1.giphy.com/media/11CXAq0P8h50GI/giphy.gif?cid=790b7611e6e61c57637194e46537903e8b3afdc2dc6ba0a4&rid=giphy.gif" alt="">

        <hr>

  <div class="container">

    <div class="row">

      <!-- Post Content Column -->
      <div class="col-lg-8">

        <!-- Title -->
        <h1 class="mt-4"><%= @post.title%></h1>

        <!-- Author -->
        <p class="lead">
          by
          <a href="#"><%= link_to @post.user.name, user_path(@post.user)%></a>
        </p>

      <hr>

        <!-- Date/Time -->
        <p><%=@post.created_at.strftime("%d-%B-%Y  -  %H:%M")%></p>

        <hr>
      <!-- Post description -->
         <h2>description: <br> <h6 class="lead"><%= @post.description%></h6>
                <hr>
                <h2>Content: <h2><br>
               <div class="content">
              <p> <%= @post.content%></p>
               </div>

                  <% pre_like = @post.likes.find { |like| like.user_id == @user.id} %>
                  <% if pre_like %>
                    <%= button_to '👎', post_like_path(@post, pre_like), method: :delete, class:"btn btn-primary mb-2", title:"unlike this post"  %>
                     <h6><%=@post.likes.count%> <%= (@post.likes.count) == 1 ? 'Like' : 'Likes'  %></h6>
                   <% else %>
                   <%= button_to '👍', post_likes_path(@post), method: :post, class:"btn btn-primary mb-2", title:"like this post" %>
    
                    <h6><%=@post.likes.count%> <%= (@post.likes.count) == 1 ? 'Like' : 'Likes'  %></h6>
                  <%end%>

                      <br>
                     <div class="card my-4">
                      <h5 class="card-header">Leave a Comment:</h5>
                     <div class="card-body">
                     <%= form_tag ({controller: 'posts', action: 'add_comment', method: 'post'}) do %>
                     <div class="form-group">
                     <textarea name="comment" rows="3" id="comment_text_area" cols="30" rows="10" class="form-control"></textarea><br>
                     </div>
                     <input type=submit value='add comment' class="btn btn-primary">
                       <% end %><br><br>
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
          </div>
        </div>











<h2>Language: <%= @post.language.name%></h2><br>

<h2>Tags: <%@post.tags.each do |t|%></h2><br>
<ul>
    <li><%=t.name%></li>
</ul>
<%end%>







<%if (@post.user_id == @user.id) || @user.is_admin%>
  <%= button_to  "Delete Post", @post, method: :delete %>
<%end%>